<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户中心 - 一碗小米周授权登录平台</title>
    <link rel="stylesheet" href="https://fa.2hs.cn/pro/7.0.0/css/all.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="css/user.css">
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <span>一碗小米周授权登录平台</span>
            </div>
            <div class="nav-right">
                <div class="user-info">
                    <img src="" alt="头像" class="user-avatar" id="nav-avatar">
                    <span class="user-name" id="nav-username">加载中...</span>
                </div>
                <!-- 管理员入口按钮 -->
                <a href="/admin/" class="btn-admin" id="btn-admin" style="display: none;">
                    <i class="fas fa-shield-alt"></i>
                    <span>管理后台</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="main-container">
        <!-- 左侧导航栏 -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" data-page="overview">
                    <i class="fas fa-home"></i>
                    <span>账户概览</span>
                </a>
                <a href="#profile" class="nav-item" data-page="profile">
                    <i class="fas fa-user"></i>
                    <span>账户信息</span>
                </a>
                <a href="#security" class="nav-item" data-page="security">
                    <i class="fas fa-shield-alt"></i>
                    <span>账户安全</span>
                </a>
                <a href="#authorized" class="nav-item" data-page="authorized">
                    <i class="fas fa-link"></i>
                    <span>已授权网站</span>
                </a>
                <a href="#logs" class="nav-item" data-page="logs">
                    <i class="fas fa-history"></i>
                    <span>登录日志</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button class="btn-logout" id="btn-logout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>退出登录</span>
                </button>
            </div>
        </aside>

        <!-- 右侧内容区 -->
        <main class="content-area">
            <!-- 账户概览 -->
            <div class="page-content active" id="page-overview">
                <div class="page-header">
                    <h1>账户概览</h1>
                    <p>查看您的账户基本信息和统计数据</p>
                </div>

                <div class="overview-grid">
                    <!-- 用户卡片 -->
                    <div class="card user-card">
                        <div class="user-profile">
                            <img src="" alt="头像" class="profile-avatar" id="profile-avatar">
                            <div class="profile-info">
                                <h2 class="profile-name" id="profile-name">加载中...</h2>
                                <p class="profile-username" id="profile-username">@username</p>
                            </div>
                        </div>
                    </div>

                    <!-- 账户状态卡片 -->
                    <div class="card stat-card status-card" id="status-card">
                        <div class="stat-icon status-icon" id="status-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-status-text">正常</div>
                            <div class="stat-label">账户状态</div>
                        </div>
                    </div>

                    <!-- 统计卡片 -->
                    <div class="card stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-link"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-authorized">-</div>
                            <div class="stat-label">已授权网站</div>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-register-time">-</div>
                            <div class="stat-label">注册时间</div>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-register-ip">-</div>
                            <div class="stat-label">注册IP</div>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-last-login">-</div>
                            <div class="stat-label">最后登录</div>
                        </div>
                    </div>

                    <div class="card stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-value" id="stat-last-ip">-</div>
                            <div class="stat-label">最后登录IP</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 账户信息 -->
            <div class="page-content" id="page-profile">
                <div class="page-header">
                    <h1>账户信息</h1>
                    <p>管理您的个人资料</p>
                </div>

                <!-- 个人资料卡片 -->
<div class="profile-main-card">
                    <div class="profile-cover"></div>
                    <div class="profile-content">
                        <div class="profile-avatar-wrapper">
                            <img src="" alt="头像" class="profile-main-avatar" id="info-avatar">
                            <div class="avatar-overlay" id="avatar-overlay">
                                <i class="fas fa-camera"></i>
                                <span>更换头像</span>
                            </div>
                        </div>
                        <div class="profile-info-section">
                            <div class="profile-name-row">
                                <h2 class="profile-display-name" id="info-display-name">加载中...</h2>
                                <!-- 昵称审核状态小标签 -->
                                <span class="review-badge" id="nickname-pending-badge" style="display: none;" title="昵称正在审核中">
                                    <i class="fas fa-clock"></i> 审核中
                                </span>
                                <button class="btn-edit-nickname" id="btn-edit-nickname">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                            <p class="profile-username-text">@<span id="info-username">username</span></p>
                            <div class="profile-badges">
                                <span class="status-badge" id="info-status">正常</span>
                                <span class="type-badge" id="info-user-type">普通用户</span>
                                <!-- 头像审核状态小标签 -->
                                <span class="review-badge" id="avatar-pending-badge" style="display: none;" title="头像正在审核中">
                                    <i class="fas fa-image"></i> 头像审核中
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 信息网格 -->
                <div class="info-cards-grid">
                    <!-- 联系方式卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-address-book"></i>
                            <h3>联系方式</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">手机号</div>
                                    <div class="info-text" id="info-phone">未绑定</div>
                                </div>
                            </div>
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">邮箱地址</div>
                                    <div class="info-text" id="info-email">未绑定</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 个人资料卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-user-circle"></i>
                            <h3>个人资料</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-venus-mars"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">性别</div>
                                    <div class="info-text" id="info-gender">未设置</div>
                                </div>
                            </div>
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-birthday-cake"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">生日</div>
                                    <div class="info-text" id="info-birth-date">未设置</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 注册信息卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-user-plus"></i>
                            <h3>注册信息</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-calendar-check"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">注册时间</div>
                                    <div class="info-text" id="info-created-at">-</div>
                                </div>
                            </div>
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">注册IP</div>
                                    <div class="info-text" id="info-register-ip">-</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 登录信息卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-sign-in-alt"></i>
                            <h3>登录信息</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">最后登录</div>
                                    <div class="info-text" id="info-last-login">-</div>
                                </div>
                            </div>
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">登录IP</div>
                                    <div class="info-text" id="info-last-ip">-</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 账户安全 -->
            <div class="page-content" id="page-security">
                <div class="page-header">
                    <h1>账户安全</h1>
                    <p>管理您的密码和安全设置</p>
                </div>

                <!-- 基本安全信息 -->
                <div class="info-cards-grid">
                    <!-- 联系方式卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-address-book"></i>
                            <h3>联系方式</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">手机号</div>
                                    <div class="info-text" id="security-phone">未绑定</div>
                                </div>
                                <button class="btn-action-small" id="btn-bind-phone" style="display: none;">
                                    <i class="fas fa-link"></i> 绑定
                                </button>
                                <button class="btn-action-small" id="btn-change-phone" style="display: none;">
                                    <i class="fas fa-edit"></i> 修改
                                </button>
                            </div>
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">邮箱地址</div>
                                    <div class="info-text" id="security-email">未绑定</div>
                                </div>
                                <button class="btn-action-small" id="btn-bind-email" style="display: none;">
                                    <i class="fas fa-link"></i> 绑定
                                </button>
                                <button class="btn-action-small" id="btn-change-email" style="display: none;">
                                    <i class="fas fa-edit"></i> 修改
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 密码安全卡片 -->
                    <div class="info-card">
                        <div class="info-card-header">
                            <i class="fas fa-key"></i>
                            <h3>密码安全</h3>
                        </div>
                        <div class="info-card-body">
                            <div class="info-item-modern">
                                <div class="info-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <div class="info-content">
                                    <div class="info-label">登录密码</div>
                                    <div class="info-text">••••••••</div>
                                </div>
                                <button class="btn-action-small" id="btn-change-password">
                                    <i class="fas fa-edit"></i> 修改
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 第三方账号绑定 -->
                <div class="card" style="margin-top: 20px;">
                    <div class="card-header">
                        <h3><i class="fas fa-link"></i> 第三方账号绑定</h3>
                        <p class="card-subtitle">绑定第三方账号后，可以使用第三方账号快捷登录</p>
                    </div>
                    <div class="card-body">
                        <!-- 加载中 -->
                        <div id="third-party-loading" class="loading-container">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>加载中...</p>
                        </div>

                        <!-- 第三方账号列表 -->
                        <div id="third-party-list" class="third-party-list" style="display: none;">
                            <!-- QQ -->
                            <div class="third-party-item">
                                <div class="third-party-icon qq-icon">
                                    <i class="fab fa-qq"></i>
                                </div>
                                <div class="third-party-info">
                                    <div class="third-party-name">QQ</div>
                                    <div class="third-party-status" id="qq-status">
                                        <span class="status-text" id="qq-status-text">未绑定</span>
                                        <div class="third-party-detail" id="qq-detail" style="display: none;">
                                            <div class="bind-info">
                                                <img src="" alt="QQ头像" class="bind-avatar" id="qq-avatar">
                                                <div class="bind-text">
                                                    <div class="bind-nickname" id="qq-nickname">-</div>
                                                    <div class="bind-time">绑定时间：<span id="qq-bind-time">-</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="third-party-action">
                                    <button class="btn-bind" id="btn-bind-qq" data-platform="qq">
                                        <i class="fas fa-link"></i> 绑定
                                    </button>
                                    <button class="btn-unbind" id="btn-unbind-qq" data-platform="qq" style="display: none;">
                                        <i class="fas fa-unlink"></i> 解绑
                                    </button>
                                </div>
                            </div>

                            <!-- 微信 -->
                            <div class="third-party-item">
                                <div class="third-party-icon wechat-icon">
                                    <i class="fab fa-weixin"></i>
                                </div>
                                <div class="third-party-info">
                                    <div class="third-party-name">微信</div>
                                    <div class="third-party-status">
                                        <span class="status-text" id="wechat-status-text">未绑定</span>
                                        <div class="third-party-detail" id="wechat-detail" style="display: none;">
                                            <div class="bind-info">
                                                <img src="" alt="微信头像" class="bind-avatar" id="wechat-avatar">
                                                <div class="bind-text">
                                                    <div class="bind-nickname" id="wechat-nickname">-</div>
                                                    <div class="bind-time">绑定时间：<span id="wechat-bind-time">-</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="third-party-action">
                                    <button class="btn-bind" id="btn-bind-wechat" data-platform="wechat">
                                        <i class="fas fa-link"></i> 绑定
                                    </button>
                                    <button class="btn-unbind" id="btn-unbind-wechat" data-platform="wechat" style="display: none;">
                                        <i class="fas fa-unlink"></i> 解绑
                                    </button>
                                </div>
                            </div>

                            <!-- 微博 -->
                            <div class="third-party-item">
                                <div class="third-party-icon weibo-icon">
                                    <i class="fab fa-weibo"></i>
                                </div>
                                <div class="third-party-info">
                                    <div class="third-party-name">微博</div>
                                    <div class="third-party-status">
                                        <span class="status-text" id="weibo-status-text">未绑定</span>
                                        <div class="third-party-detail" id="weibo-detail" style="display: none;">
                                            <div class="bind-info">
                                                <img src="" alt="微博头像" class="bind-avatar" id="weibo-avatar">
                                                <div class="bind-text">
                                                    <div class="bind-nickname" id="weibo-nickname">-</div>
                                                    <div class="bind-time">绑定时间：<span id="weibo-bind-time">-</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="third-party-action">
                                    <button class="btn-bind" id="btn-bind-weibo" data-platform="weibo">
                                        <i class="fas fa-link"></i> 绑定
                                    </button>
                                    <button class="btn-unbind" id="btn-unbind-weibo" data-platform="weibo" style="display: none;">
                                        <i class="fas fa-unlink"></i> 解绑
                                    </button>
                                </div>
                            </div>

                            <!-- GitHub -->
                            <div class="third-party-item">
                                <div class="third-party-icon github-icon">
                                    <i class="fab fa-github"></i>
                                </div>
                                <div class="third-party-info">
                                    <div class="third-party-name">GitHub</div>
                                    <div class="third-party-status">
                                        <span class="status-text" id="github-status-text">未绑定</span>
                                        <div class="third-party-detail" id="github-detail" style="display: none;">
                                            <div class="bind-info">
                                                <img src="" alt="GitHub头像" class="bind-avatar" id="github-avatar">
                                                <div class="bind-text">
                                                    <div class="bind-nickname" id="github-nickname">-</div>
                                                    <div class="bind-time">绑定时间：<span id="github-bind-time">-</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="third-party-action">
                                    <button class="btn-bind" id="btn-bind-github" data-platform="github">
                                        <i class="fas fa-link"></i> 绑定
                                    </button>
                                    <button class="btn-unbind" id="btn-unbind-github" data-platform="github" style="display: none;">
                                        <i class="fas fa-unlink"></i> 解绑
                                    </button>
                                </div>
                            </div>

                            <!-- Google -->
                            <div class="third-party-item">
                                <div class="third-party-icon google-icon">
                                    <i class="fab fa-google"></i>
                                </div>
                                <div class="third-party-info">
                                    <div class="third-party-name">Google</div>
                                    <div class="third-party-status">
                                        <span class="status-text" id="google-status-text">未绑定</span>
                                        <div class="third-party-detail" id="google-detail" style="display: none;">
                                            <div class="bind-info">
                                                <img src="" alt="Google头像" class="bind-avatar" id="google-avatar">
                                                <div class="bind-text">
                                                    <div class="bind-nickname" id="google-nickname">-</div>
                                                    <div class="bind-time">绑定时间：<span id="google-bind-time">-</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="third-party-action">
                                    <button class="btn-bind" id="btn-bind-google" data-platform="google">
                                        <i class="fas fa-link"></i> 绑定
                                    </button>
                                    <button class="btn-unbind" id="btn-unbind-google" data-platform="google" style="display: none;">
                                        <i class="fas fa-unlink"></i> 解绑
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 已授权网站 -->
            <div class="page-content" id="page-authorized">
                <div class="page-header">
                    <h1>已授权网站</h1>
                    <p>管理已授权访问您账户的第三方应用</p>
                </div>

                <!-- 加载中 -->
                <div id="authorized-loading" class="loading-container">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>加载中...</p>
                </div>

                <!-- 空状态 -->
                <div id="authorized-empty" class="empty-state" style="display: none;">
                    <i class="fas fa-link"></i>
                    <h3>暂无授权应用</h3>
                    <p>您还没有授权任何第三方应用访问您的账户</p>
                </div>

                <!-- 应用列表 -->
                <div id="authorized-list" class="authorized-apps-grid" style="display: none;">
                    <!-- 应用卡片将通过 JavaScript 动态生成 -->
                </div>
            </div>

            <!-- 登录日志 -->
            <div class="page-content" id="page-logs">
                <div class="page-header">
                    <h1>登录日志</h1>
                    <p>查看您的账户登录历史记录</p>
                </div>

                <div class="card">
                    <div class="card-body">
                        <p class="text-muted">功能开发中...</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast 容器 -->
    <div id="toast-container" class="toast-container"></div>

    <!-- 修改密码弹窗 -->
    <div id="change-password-modal" class="modal-overlay">
        <div class="modal-content change-password-modal">
            <div class="modal-header">
                <div class="modal-icon info">
                    <i class="fas fa-key"></i>
                </div>
                <h3>修改密码</h3>
                <button class="modal-close" id="close-change-password-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 步骤指示器 -->
                <div class="steps-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">选择验证方式</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">身份验证</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">设置新密码</div>
                    </div>
                </div>

                <!-- 第一步：选择验证方式 -->
                <div class="password-step" id="password-step-1">
                    <div class="step-title">
                        <i class="fas fa-shield-alt"></i>
                        <span>请选择验证方式</span>
                    </div>
                    <div class="verify-methods">
                        <div class="verify-method" id="verify-method-phone" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">手机号验证</div>
                                <div class="method-desc" id="verify-phone-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="phone">
                                    选择
                                </button>
                            </div>
                        </div>
                        <div class="verify-method" id="verify-method-email" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">邮箱验证</div>
                                <div class="method-desc" id="verify-email-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="email">
                                    选择
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-hint">
                        <i class="fas fa-info-circle"></i>
                        <span>为了您的账户安全，修改密码需要进行身份验证</span>
                    </div>
                </div>

                <!-- 第二步：身份验证 -->
                <div class="password-step" id="password-step-2" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-shield-check"></i>
                        <span>身份验证</span>
                    </div>
                    <div class="verify-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-mobile-alt" id="verify-icon-phone"></i>
                                <i class="fas fa-envelope" id="verify-icon-email" style="display: none;"></i>
                                <span id="verify-target-label">手机号</span>
                            </label>
                            <input type="text" class="form-input" id="verify-target" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-shield-alt"></i>
                                验证码
                            </label>
                            <div class="code-input-group">
                                <input type="text" class="form-input" id="verify-code" placeholder="请输入验证码" maxlength="6">
                                <button class="btn-send-code" id="btn-send-verify-code">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>发送验证码</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-back-step-1">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-verify-code">
                            下一步 <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- 第三步：设置新密码 -->
                <div class="password-step" id="password-step-3" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-lock"></i>
                        <span>设置新密码</span>
                    </div>
                    <div class="password-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-key"></i>
                                新密码
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="new-password" placeholder="请输入新密码（8-20位）" maxlength="20">
                                <button class="btn-toggle-password" type="button" data-target="new-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="password-strength" id="password-strength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="strength-fill"></div>
                                </div>
                                <div class="strength-text" id="strength-text">请输入密码</div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-check-circle"></i>
                                确认密码
                            </label>
                            <div class="password-input-group">
                                <input type="password" class="form-input" id="confirm-password" placeholder="请再次输入新密码" maxlength="20">
                                <button class="btn-toggle-password" type="button" data-target="confirm-password">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-back-step-2">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-submit-password">
                            <i class="fas fa-check"></i> 提交修改
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 修改手机号弹窗 -->
    <div id="change-phone-modal" class="modal-overlay">
        <div class="modal-content change-password-modal">
            <div class="modal-header">
                <div class="modal-icon info">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>修改手机号</h3>
                <button class="modal-close" id="close-change-phone-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 步骤指示器 -->
                <div class="steps-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">选择验证方式</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">验证身份</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">绑定新手机</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">完成修改</div>
                    </div>
                </div>

                <!-- 第一步：选择验证方式 -->
                <div class="phone-step" id="phone-step-1">
                    <div class="step-title">
                        <i class="fas fa-shield-alt"></i>
                        <span>请选择验证方式</span>
                    </div>
                    <div class="verify-methods">
                        <div class="verify-method" id="phone-verify-method-phone" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">当前手机号验证</div>
                                <div class="method-desc" id="phone-verify-phone-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="phone">
                                    选择
                                </button>
                            </div>
                        </div>
                        <div class="verify-method" id="phone-verify-method-email" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">邮箱验证</div>
                                <div class="method-desc" id="phone-verify-email-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="email">
                                    选择
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-hint">
                        <i class="fas fa-info-circle"></i>
                        <span>为了您的账户安全，修改手机号需要先验证身份</span>
                    </div>
                </div>

                <!-- 第二步：验证身份 -->
                <div class="phone-step" id="phone-step-2" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-shield-check"></i>
                        <span>验证当前身份</span>
                    </div>
                    <div class="verify-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-mobile-alt" id="phone-verify-icon-phone"></i>
                                <i class="fas fa-envelope" id="phone-verify-icon-email" style="display: none;"></i>
                                <span id="phone-verify-target-label">手机号</span>
                            </label>
                            <input type="text" class="form-input" id="phone-verify-target" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-shield-alt"></i>
                                验证码
                            </label>
                            <div class="code-input-group">
                                <input type="text" class="form-input" id="phone-verify-code" placeholder="请输入验证码" maxlength="6">
                                <button class="btn-send-code" id="btn-send-phone-verify-code">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>发送验证码</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-phone-back-step-1">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-phone-verify-code">
                            下一步 <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- 第三步：绑定新手机 -->
                <div class="phone-step" id="phone-step-3" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-mobile-alt"></i>
                        <span>绑定新手机号</span>
                    </div>
                    <div class="phone-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-mobile-alt"></i>
                                新手机号
                            </label>
                            <input type="text" class="form-input" id="new-phone" placeholder="请输入新手机号" maxlength="11">
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-shield-alt"></i>
                                验证码
                            </label>
                            <div class="code-input-group">
                                <input type="text" class="form-input" id="new-phone-code" placeholder="请输入验证码" maxlength="6">
                                <button class="btn-send-code" id="btn-send-new-phone-code">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>发送验证码</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-phone-back-step-2">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-phone-submit">
                            <i class="fas fa-check"></i> 提交修改
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 修改邮箱弹窗 -->
    <div id="change-email-modal" class="modal-overlay">
        <div class="modal-content change-password-modal">
            <div class="modal-header">
                <div class="modal-icon info">
                    <i class="fas fa-envelope"></i>
                </div>
                <h3>修改邮箱</h3>
                <button class="modal-close" id="close-change-email-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 步骤指示器 -->
                <div class="steps-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">选择验证方式</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">验证身份</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">绑定新邮箱</div>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">完成修改</div>
                    </div>
                </div>

                <!-- 第一步：选择验证方式 -->
                <div class="email-step" id="email-step-1">
                    <div class="step-title">
                        <i class="fas fa-shield-alt"></i>
                        <span>请选择验证方式</span>
                    </div>
                    <div class="verify-methods">
                        <div class="verify-method" id="email-verify-method-phone" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">手机号验证</div>
                                <div class="method-desc" id="email-verify-phone-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="phone">
                                    选择
                                </button>
                            </div>
                        </div>
                        <div class="verify-method" id="email-verify-method-email" style="display: none;">
                            <div class="method-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="method-info">
                                <div class="method-title">当前邮箱验证</div>
                                <div class="method-desc" id="email-verify-email-display">***</div>
                            </div>
                            <div class="method-action">
                                <button class="btn-select-method" data-method="email">
                                    选择
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-hint">
                        <i class="fas fa-info-circle"></i>
                        <span>为了您的账户安全，修改邮箱需要先验证身份</span>
                    </div>
                </div>

                <!-- 第二步：验证身份 -->
                <div class="email-step" id="email-step-2" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-shield-check"></i>
                        <span>验证当前身份</span>
                    </div>
                    <div class="verify-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-mobile-alt" id="email-verify-icon-phone"></i>
                                <i class="fas fa-envelope" id="email-verify-icon-email" style="display: none;"></i>
                                <span id="email-verify-target-label">手机号</span>
                            </label>
                            <input type="text" class="form-input" id="email-verify-target" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-shield-alt"></i>
                                验证码
                            </label>
                            <div class="code-input-group">
                                <input type="text" class="form-input" id="email-verify-code" placeholder="请输入验证码" maxlength="6">
                                <button class="btn-send-code" id="btn-send-email-verify-code">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>发送验证码</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-email-back-step-1">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-email-verify-code">
                            下一步 <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- 第三步：绑定新邮箱 -->
                <div class="email-step" id="email-step-3" style="display: none;">
                    <div class="step-title">
                        <i class="fas fa-envelope"></i>
                        <span>绑定新邮箱</span>
                    </div>
                    <div class="email-form">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-envelope"></i>
                                新邮箱地址
                            </label>
                            <input type="email" class="form-input" id="new-email" placeholder="请输入新邮箱地址">
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-shield-alt"></i>
                                验证码
                            </label>
                            <div class="code-input-group">
                                <input type="text" class="form-input" id="new-email-code" placeholder="请输入验证码" maxlength="6">
                                <button class="btn-send-code" id="btn-send-new-email-code">
                                    <i class="fas fa-paper-plane"></i>
                                    <span>发送验证码</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="step-actions">
                        <button class="btn-secondary" id="btn-email-back-step-2">
                            <i class="fas fa-arrow-left"></i> 上一步
                        </button>
                        <button class="btn-primary" id="btn-email-submit">
                            <i class="fas fa-check"></i> 提交修改
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 自定义弹出框 -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div id="modal-icon" class="modal-icon error">
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <h3 id="modal-title">提示</h3>
            </div>
            <div class="modal-body">
                <p id="modal-message">消息内容</p>
            </div>
            <div class="modal-footer">
                <button id="modal-cancel" class="btn-cancel" style="display: none;">取消</button>
                <button id="modal-confirm" class="btn-confirm">确定</button>
            </div>
        </div>
    </div>

    <!-- 自定义输入弹出框 -->
    <div id="input-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon info">
                    <i class="fas fa-edit"></i>
                </div>
                <h3 id="input-modal-title">编辑</h3>
            </div>
            <div class="modal-body">
                <p id="input-modal-message">请输入内容</p>
                <input type="text" id="input-modal-field" class="modal-input" placeholder="请输入...">
            </div>
            <div class="modal-footer">
                <button id="input-modal-cancel" class="btn-cancel">取消</button>
                <button id="input-modal-confirm" class="btn-confirm">确定</button>
            </div>
        </div>
    </div>

    <!-- 头像上传弹出框 -->
    <div id="upload-modal-overlay" class="modal-overlay">
        <div class="modal-content upload-modal">
            <div class="modal-header">
                <div class="modal-icon info">
                    <i class="fas fa-image"></i>
                </div>
                <h3>上传头像</h3>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="upload-area">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <p class="upload-text">拖拽图片到此处，或点击选择文件</p>
                    <p class="upload-hint">支持 JPG、PNG、GIF、WEBP 格式，最大 5MB</p>
                    <input type="file" id="avatar-file-input" accept="image/jpeg,image/jpg,image/png,image/gif,image/webp" style="display: none;">
                    <button class="btn-select-file" id="btn-select-file">选择文件</button>
                </div>
                <div class="upload-preview" id="upload-preview" style="display: none;">
                    <img src="" alt="预览" id="preview-image">
                    <button class="btn-remove-preview" id="btn-remove-preview">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="upload-progress" id="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">上传中... 0%</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="upload-modal-cancel" class="btn-cancel">取消</button>
                <button id="upload-modal-confirm" class="btn-confirm">上传</button>
            </div>
        </div>
    </div>

    <script src="js/user.js"></script>
</body>
</html>
